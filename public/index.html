<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<title>Meme Generator</title>
		<link rel="stylesheet" type="text/css" href="style.css">
	</head>
	<body>
		

		
		<h1>Meme Generator</h1>
		<div style = "text-align: center;">
			<button type="button" onclick="crewOrImp()">So, which is it?</button>
			<br></br>
			<input id = "input" type="text"></input>
			<button type="button" onclick="memeInsert()">Send a meme!</button>
			<button type="button" onclick="resultToHTML()">Print meme</button>
			<form action="/profile" method="post" enctype="multipart/form-data">
				<input type="file" name="meme" />
				<button type="button" onclick="submitPic()">Submit picture</button>
			  </form>
		</div>
		<div id = "html">
			<p>HTML stuff should go here.</p>
		</div>
		<br></br>
		<div id="crewOrImp" style = "text-align: center;"> 
			Crew or Imposter?
		</div>



		<script type="text/javascript"> 
			function submitPic(){
				var xhr = new XMLHttpRequest();			
				
				xhr.open("POST","http://localhost:3000/profile", true);
				xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

				xhr.onreadystatechange = function() {
        			if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
       				}
				};
				
				xhr.send();
			}
			function crewOrImp(){
				var xhr = new XMLHttpRequest();			
				
				xhr.open("GET","http://localhost:3000/crewOrImp", true);
				xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

				xhr.onreadystatechange = function() {
        			if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
            			document.getElementById("crewOrImp").innerHTML = this.responseText;
						document.getElementById("crewOrImp").style.backgroundColor = "blue";
       				}
				};
				
				xhr.send();
   			}

			function memeInsert(){
				var filepath = document.getElementById("input").value;

				var xhr = new XMLHttpRequest();			
				
				xhr.open("GET","http://localhost:3000/memeInsert?filepath=" + filepath, true);
				xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

				xhr.onreadystatechange = function() {
        			if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
            			
       				}
				}
				xhr.send();
   			}
			function resultToHTML(){
				var xhr = new XMLHttpRequest();		
				
				
				xhr.open("GET","http://localhost:3000/resultToHTML", true);
				xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

				xhr.onreadystatechange = function() {
        			if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
            			document.getElementById("html").innerHTML = "<img src ='" + this.responseText + "' alt = 'Meme' width = '300' height = '300'>";	
       				}
				}
				xhr.send();
   			}
		</script>
	</body>
</html>
